<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wine Quality - CSV Input</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
      <h1>Wine Quality Testing (CSV Input)</h1>
      <nav>
        <a href="/" class="btn">Back to Home</a>
      </nav>
    </header>
  
    <main class="csv-container container">
      <h2>Upload Your CSV File</h2>
      <form action="/upload_csv" method="POST" enctype="multipart/form-data">
        <label for="csvFile">Select CSV:</label>
        <input type="file" name="csvFile" id="csvFile" accept=".csv" required />
        <button type="submit" class="btn">Submit CSV</button>
      </form>

      <br>

      <div id="outputCSV">
        <h2>Result</h2>

        {% if predictions %}
            {% if error %}
                <p style="color:red;">‚ö†Ô∏è Error: {{ error }}</p>
            {% elif predictions %}
                <h3>Predicted Wine Quality Results:</h3>

                <!-- ‚úÖ Display Detailed Table -->
                <table border="1" cellpadding="10" cellspacing="0" style="width:100%; border-collapse:collapse;">
                  <thead style="background-color:#f2f2f2;">
                    <tr>
                      <th>Sample</th>
                      <th>Fixed Acidity</th>
                      <th>Volatile Acidity</th>
                      <th>Citric Acid</th>
                      <th>Residual Sugar</th>
                      <th>Chlorides</th>
                      <th>Free SO‚ÇÇ</th>
                      <th>Total SO‚ÇÇ</th>
                      <th>Density</th>
                      <th>pH</th>
                      <th>Sulphates</th>
                      <th>Alcohol</th>
                      <th>Color</th>
                      <th>Predicted Quality</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for pred in predictions %}
                    <tr>
                      <td>{{ pred.Sample }}</td>
                      <td>{{ pred.fixed_acidity }}</td>
                      <td>{{ pred.volatile_acidity }}</td>
                      <td>{{ pred.citric_acid }}</td>
                      <td>{{ pred.residual_sugar }}</td>
                      <td>{{ pred.chlorides }}</td>
                      <td>{{ pred.free_sulfur_dioxide }}</td>
                      <td>{{ pred.total_sulfur_dioxide }}</td>
                      <td>{{ pred.density }}</td>
                      <td>{{ pred.pH }}</td>
                      <td>{{ pred.sulphates }}</td>
                      <td>{{ pred.alcohol }}</td>
                      <td>{{ pred.color }}</td>
                      <td style="font-weight:bold; color:green;">{{ pred['Predicted Quality'] }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>

                <p style="color:green;">üìÇ Output saved at: volumes/user/predictions.json</p>
            {% else %}
                <p style="color:orange;">‚ö†Ô∏è No predictions found in the response.</p>
            {% endif %}
        {% else %}
            <p>No predictions available yet. Please upload a CSV file and submit.</p>
        {% endif %}
      </div>
    </main>
  
    <footer>
      <p>&copy; 2025 My Wine Quality App</p>
    </footer>
</body>
</html>