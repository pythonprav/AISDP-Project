<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wine Quality - CSV Input</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
      <h1>Wine Quality Testing (CSV Input)</h1>
      <nav>
        <a href="/" class="btn">Back to Home</a>
      </nav>
    </header>
  
    <main class="csv-container container">
      <div style="text-align: center; margin-bottom: 2rem;">
        <h2 style="font-size: 2rem; font-weight: bold; color: #fff;">
          Upload Your CSV File
        </h2>
      </div>
      <form action="/upload_csv" method="POST" enctype="multipart/form-data" style="display: flex; flex-direction: column; align-items: center;">
        <label for="csvFile">Select CSV:</label>
        <input type="file" name="csvFile" id="csvFile" accept=".csv" required />
        <button type="submit" class="btn">Submit CSV</button>
      </form>

      <br>

      <div id="outputCSV">
        <h2>Result</h2>
      
        {% if predictions %}
            {% if predictions.status == 'error' %}
                <p style="color:red;">‚ö†Ô∏è Error: {{ predictions.details }}</p>
            {% elif 'predictions_preview' in predictions %}
                <h3>Predicted Wine Quality Results:</h3>
                <div class="table-container">
                  <table>
                    <thead>
                      <tr>
                        <th>Sample</th>
                        <th>Fixed Acidity</th>
                        <th>Volatile Acidity</th>
                        <th>Citric Acid</th>
                        <th>Residual Sugar</th>
                        <th>Chlorides</th>
                        <th>Free SO‚ÇÇ</th>
                        <th>Total SO‚ÇÇ</th>
                        <th>Density</th>
                        <th>pH</th>
                        <th>Sulphates</th>
                        <th>Alcohol</th>
                        <th>Color</th>
                        <th class="highlight-quality">Predicted Quality</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for pred in predictions.predictions_preview %}
                      <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ pred.fixed_acidity }}</td>
                        <td>{{ pred.volatile_acidity }}</td>
                        <td>{{ pred.citric_acid }}</td>
                        <td>{{ pred.residual_sugar }}</td>
                        <td>{{ pred.chlorides }}</td>
                        <td>{{ pred.free_sulfur_dioxide }}</td>
                        <td>{{ pred.total_sulfur_dioxide }}</td>
                        <td>{{ pred.density }}</td>
                        <td>{{ pred.pH }}</td>
                        <td>{{ pred.sulphates }}</td>
                        <td>{{ pred.alcohol }}</td>
                        <td>{{ pred.color }}</td>
                        <td class="highlight-quality">{{ pred.predicted_quality if pred.predicted_quality else "N/A" }}</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>

                <p style="color:green;">üìÇ Output saved at: {{ predictions.output_path }}</p>
            {% else %}
                <p style="color:orange;">‚ö†Ô∏è No predictions found in the response.</p>
            {% endif %}
        {% else %}
            <p>No predictions available yet. Please upload a CSV file and submit.</p>
        {% endif %}
      </div>
    </main>
  
    <footer>
      <p>&copy; 2025 My Wine Quality App</p>
    </footer>
</body>
</html>